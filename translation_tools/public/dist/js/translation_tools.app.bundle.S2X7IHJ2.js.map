{
  "version": 3,
  "sources": ["../../../../../apps/translation_tools/translation_tools/public/js/app.js"],
  "sourcesContent": ["console.log(\"Translation Tools integration script loaded\");\nfrappe.ui.form.on(\"Workspace\", {\n  refresh: function (frm) {\n    // Only run this for Integrations workspace\n    if (frm.doc.name !== \"Integrations\") return;\n\n    console.log(\n      \"Translation Tools integration running for Integrations workspace\"\n    );\n\n    // First check if the link already exists\n    frappe.call({\n      method: \"translation_tools.api.integrations.check_translation_tools_link\",\n      args: {},\n      callback: function (r) {\n        if (r.message && !r.message.link_exists) {\n          console.log(\"Translation Tools link doesn't exist, showing button\");\n\n          // Create a button to add the link\n          var button = $(\n            \"<button class='btn btn-primary mt-3 mb-3'>Add Translation Tools to Integration</button>\"\n          );\n\n          button.on(\"click\", function () {\n            frappe.call({\n              method:\n                \"ranslation_tools.api.integrations.add_translation_tools_link_to_integrations\",\n              args: {},\n              callback: function (r) {\n                if (r.message && r.message.success) {\n                  frappe.show_alert({\n                    message: __(\"Translation Tools link added successfully!\"),\n                    indicator: \"green\",\n                  });\n\n                  // Reload the page after a short delay\n                  setTimeout(function () {\n                    window.location.reload();\n                  }, 1500);\n                } else {\n                  frappe.msgprint(\n                    __(\n                      \"Error: \" +\n                        (r.message && r.message.error\n                          ? r.message.error\n                          : \"Unknown error\")\n                    )\n                  );\n                }\n              },\n            });\n          });\n\n          // Add the button to the page\n          $(frm.fields_dict.links_html.wrapper).prepend(button);\n        } else {\n          console.log(\"Translation Tools link already exists\");\n        }\n      },\n    });\n  },\n});\n"],
  "mappings": ";;AAAA,UAAQ,IAAI,6CAA6C;AACzD,SAAO,GAAG,KAAK,GAAG,aAAa;AAAA,IAC7B,SAAS,SAAU,KAAK;AAEtB,UAAI,IAAI,IAAI,SAAS;AAAgB;AAErC,cAAQ;AAAA,QACN;AAAA,MACF;AAGA,aAAO,KAAK;AAAA,QACV,QAAQ;AAAA,QACR,MAAM,CAAC;AAAA,QACP,UAAU,SAAU,GAAG;AACrB,cAAI,EAAE,WAAW,CAAC,EAAE,QAAQ,aAAa;AACvC,oBAAQ,IAAI,sDAAsD;AAGlE,gBAAI,SAAS;AAAA,cACX;AAAA,YACF;AAEA,mBAAO,GAAG,SAAS,WAAY;AAC7B,qBAAO,KAAK;AAAA,gBACV,QACE;AAAA,gBACF,MAAM,CAAC;AAAA,gBACP,UAAU,SAAUA,IAAG;AACrB,sBAAIA,GAAE,WAAWA,GAAE,QAAQ,SAAS;AAClC,2BAAO,WAAW;AAAA,sBAChB,SAAS,GAAG,4CAA4C;AAAA,sBACxD,WAAW;AAAA,oBACb,CAAC;AAGD,+BAAW,WAAY;AACrB,6BAAO,SAAS,OAAO;AAAA,oBACzB,GAAG,IAAI;AAAA,kBACT,OAAO;AACL,2BAAO;AAAA,sBACL;AAAA,wBACE,aACGA,GAAE,WAAWA,GAAE,QAAQ,QACpBA,GAAE,QAAQ,QACV;AAAA,sBACR;AAAA,oBACF;AAAA,kBACF;AAAA,gBACF;AAAA,cACF,CAAC;AAAA,YACH,CAAC;AAGD,cAAE,IAAI,YAAY,WAAW,OAAO,EAAE,QAAQ,MAAM;AAAA,UACtD,OAAO;AACL,oBAAQ,IAAI,uCAAuC;AAAA,UACrD;AAAA,QACF;AAAA,MACF,CAAC;AAAA,IACH;AAAA,EACF,CAAC;",
  "names": ["r"]
}
